<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CrediTrack | My Profile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/alpinejs" defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#4361ee',
                        secondary: '#3f37c9',
                        accent: '#4895ef',
                        success: '#4ade80',
                        warning: '#fbbf24',
                        danger: '#f87171',
                        info: '#60a5fa',
                        dark: {
                            900: '#121826',
                            800: '#1e293b',
                            700: '#334155',
                        },
                        malawi: {
                            green: '#339e35',
                            red: '#ce1126',
                            black: '#000000'
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background-color: #f3f4f6;
        }
        
        .dark body {
            background-color: #0f172a;
        }
        
        .card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            border-radius: 12px;
            overflow: hidden;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        .sidebar-link:hover {
            background-color: rgba(67, 97, 238, 0.1);
        }
        
        .sidebar-link.active {
            background-color: rgba(67, 97, 238, 0.2);
            border-left: 3px solid #4361ee;
        }
        
        .notification-dot {
            position: absolute;
            top: 0;
            right: 0;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #f87171;
        }
        
        .table-row:hover {
            background-color: rgba(67, 97, 238, 0.05);
        }
        
        .dark .table-row:hover {
            background-color: rgba(67, 97, 238, 0.1);
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #4361ee 0%, #3f37c9 100%);
        }
        
        .loan-progress {
            height: 8px;
            border-radius: 4px;
        }
        
        .loan-progress::-webkit-progress-bar {
            background-color: #e5e7eb;
            border-radius: 4px;
        }
        
        .loan-progress::-webkit-progress-value {
            background-color: #4361ee;
            border-radius: 4px;
        }
        
        .offer-card {
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .offer-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px -10px rgba(0, 0, 0, 0.15);
        }
        
        .status-badge {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .quick-action-card {
            transition: all 0.3s ease;
            border-radius: 12px;
            overflow: hidden;
        }
        
        .quick-action-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px -5px rgba(67, 97, 238, 0.2);
        }
        
        .malawi-flag-bg {
            background: linear-gradient(to bottom, #000000 33%, #ce1126 33%, #ce1126 66%, #339e35 66%);
        }

        .status-active {
            background-color: #dcfce7;
            color: #166534;
        }

        .status-pending {
            background-color: #fef3c7;
            color: #92400e;
        }

        .status-overdue {
            background-color: #fee2e2;
            color: #991b1b;
        }

        .status-repaid {
            background-color: #dbeafe;
            color: #1e40af;
        }

        .dark .status-active {
            background-color: rgba(34, 197, 94, 0.2);
            color: #4ade80;
        }

        .dark .status-pending {
            background-color: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
        }

        .dark .status-overdue {
            background-color: rgba(248, 113, 113, 0.2);
            color: #f87171;
        }

        .dark .status-repaid {
            background-color: rgba(96, 165, 250, 0.2);
            color: #60a5fa;
        }

        .credit-score-gauge {
            position: relative;
            width: 200px;
            height: 100px;
            margin: 0 auto;
        }

        .credit-score-arc {
            stroke-width: 8;
            fill: none;
        }

        .credit-score-bg {
            stroke: #e5e7eb;
        }

        .credit-score-fill {
            stroke: #4361ee;
            stroke-linecap: round;
            transition: stroke-dasharray 1s ease-in-out;
        }
    </style>
</head>
<body class="h-full" x-data="{ 
        darkMode: localStorage.getItem('darkMode') === 'true',
        sidebarOpen: window.innerWidth > 1024,
        currentView: 'my_profile',
        notificationsOpen: false,
        profileMenuOpen: false,
        loanApplicationOpen: false,
        showPaymentModal: false,
        paymentAmount: '',
        paymentMethod: 'Airtel Money',
        editingProfile: false,
        changingPassword: false,
        userProfile: {
            name: 'John Banda',
            phone: '+265 991 234 567',
            email: 'john.banda@example.com',
            address: 'Lilongwe, Area 3',
            occupation: 'Business Owner',
            idType: 'National ID',
            idNumber: 'MW12345678',
            creditScore: 720,
            memberSince: '2023-01-15',
            totalLoans: 4,
            totalBorrowed: 'MK250,000',
            totalRepaid: 'MK175,000',
            onTimePayments: 95
        },
        loanAmount: 50000,
        loanTerm: 4,
        loanPurpose: 'Business',
        nationalIdFile: null,
        collateralFiles: [],
        notifications: [
            { id: 1, type: 'payment', title: 'Payment Due', content: 'Payment of MK15,000 due in 3 days', time: 'Today', read: false },
            { id: 2, type: 'approval', title: 'Loan Approved', content: 'Your loan of MK50,000 has been approved', time: '2 days ago', read: true },
            { id: 3, type: 'offer', title: 'Special Offer', content: 'Limited time: Get 1% lower interest rate', time: '5 days ago', read: true }
        ],
        unreadCount: 1,
        loans: [
            { id: 'L-10245', amount: 'MK50,000', interest: '15%', disbursed: '2023-06-15', due: '2023-12-15', status: 'active', nextPayment: 'MK15,000', nextPaymentDate: '2023-09-15', paid: 30, total: 100 },
            { id: 'L-10246', amount: 'MK25,000', interest: '12%', disbursed: '2023-07-01', due: '2024-01-01', status: 'pending', nextPayment: 'MK7,500', nextPaymentDate: '2023-10-01', paid: 0, total: 100 },
            { id: 'L-10247', amount: 'MK75,000', interest: '18%', disbursed: '2023-05-20', due: '2023-11-20', status: 'overdue', nextPayment: 'MK22,500', nextPaymentDate: '2023-08-20', paid: 60, total: 100 },
            { id: 'L-10248', amount: 'MK100,000', interest: '20%', disbursed: '2023-04-05', due: '2024-04-05', status: 'repaid', nextPayment: 'MK0', nextPaymentDate: 'N/A', paid: 100, total: 100 }
        ],
        paymentMethods: [
            { id: 1, name: 'Airtel Money', icon: 'fa-solid fa-mobile-screen' },
            { id: 2, name: 'TNM Mpamba', icon: 'fa-solid fa-mobile' },
            { id: 3, name: 'Standard Bank', icon: 'fa-solid fa-building-columns' },
            { id: 4, name: 'National Bank', icon: 'fa-solid fa-landmark' },
            { id: 5, name: 'Cash', icon: 'fa-solid fa-money-bill-wave' }
        ],
        securitySettings: {
            twoFactorEnabled: false,
            emailNotifications: true,
            smsNotifications: true,
            loginAlerts: true
        },
        privacySettings: {
            profileVisibility: 'private',
            dataSharing: false,
            marketingEmails: true
        },
        get creditScoreColor() {
            if (this.userProfile.creditScore >= 750) return '#22c55e';
            if (this.userProfile.creditScore >= 650) return '#eab308';
            return '#ef4444';
        },
        get creditScoreText() {
            if (this.userProfile.creditScore >= 750) return 'Excellent';
            if (this.userProfile.creditScore >= 650) return 'Good';
            if (this.userProfile.creditScore >= 550) return 'Fair';
            return 'Poor';
        },
        handleNationalIdUpload(event) {
            const file = event.target.files[0];
            if (file) {
                if (file.size > 5 * 1024 * 1024) {
                    alert('File size must be less than 5MB');
                    return;
                }
                this.nationalIdFile = file;
            }
        },
        handleCollateralUpload(event) {
            const files = Array.from(event.target.files);
            for (let file of files) {
                if (file.size > 5 * 1024 * 1024) {
                    alert(`File ${file.name} is too large. Maximum size is 5MB`);
                    continue;
                }
                this.collateralFiles.push(file);
            }
        },
        removeCollateralFile(index) {
            this.collateralFiles.splice(index, 1);
        },
        saveProfile() {
            this.editingProfile = false;
            alert('Profile updated successfully!');
        },
        changePassword() {
            this.changingPassword = false;
            alert('Password changed successfully!');
        }
    }" 
    x-init="
        $watch('darkMode', value => localStorage.setItem('darkMode', value));
        if (localStorage.getItem('darkMode') === 'true') document.documentElement.classList.add('dark');
    "
    :class="{ 'dark': darkMode }">
    <div class="flex h-screen bg-gray-50 dark:bg-dark-900">
        <!-- Mobile sidebar -->
        <div x-show="sidebarOpen" x-cloak class="fixed inset-0 flex z-40 lg:hidden">
            <div class="fixed inset-0 bg-gray-600 bg-opacity-75" @click="sidebarOpen = false" aria-hidden="true"></div>
            <div class="relative flex-1 flex flex-col max-w-xs w-full bg-white dark:bg-dark-800">
                <div class="absolute top-0 right-0 -mr-12 pt-2">
                    <button @click="sidebarOpen = false" class="ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:bg-gray-200 dark:focus:bg-dark-700">
                        <span class="sr-only">Close sidebar</span>
                        <i class="fa-solid fa-xmark text-gray-700 dark:text-gray-300 text-2xl"></i>
                    </button>
                </div>
                <div class="flex-1 h-0 pt-5 pb-4 overflow-y-auto">
                    <div class="flex items-center flex-shrink-0 px-4">
                        <div class="flex items-center">
                            <div class="bg-primary p-2 rounded-lg">
                                <i class="text-white text-2xl fa-solid fa-landmark"></i>
                            </div>
                            <span class="ml-3 text-xl font-bold text-gray-900 dark:text-white">IRM Enterprise</span>
                        </div>
                    </div>
                    <nav class="mt-5 px-2 space-y-1">
                        <a href="dashboard.html" class="sidebar-link flex items-center px-4 py-3 text-base font-medium rounded-lg group">
                            <i class="fa-solid fa-chart-line mr-3 text-gray-500 group-hover:text-primary"></i>
                            Dashboard
                        </a>
                        <a href="my_loans.html" class="sidebar-link flex items-center px-4 py-3 text-base font-medium rounded-lg group">
                            <i class="fa-solid fa-file-invoice-dollar mr-3 text-gray-500 group-hover:text-primary"></i>
                            My Loans
                        </a>
                        <a href="payback.html" class="sidebar-link flex items-center px-4 py-3 text-base font-medium rounded-lg group">
                            <i class="fa-solid fa-money-bill-transfer mr-3 text-gray-500 group-hover:text-primary"></i>
                            Payback
                        </a>
                        <a href="special_offers.html" class="sidebar-link flex items-center px-4 py-3 text-base font-medium rounded-lg group">
                            <i class="fa-solid fa-gift mr-3 text-gray-500 group-hover:text-primary"></i>
                            Special Offers
                        </a>
                        <a href="my_profile.html" class="sidebar-link active flex items-center px-4 py-3 text-base font-medium rounded-lg group bg-primary/10 text-primary">
                            <i class="fa-solid fa-user mr-3 text-primary"></i>
                            My Profile
                        </a>
                    </nav>
                </div>
                <div class="flex-shrink-0 flex border-t border-gray-200 dark:border-gray-700 p-4">
                    <div class="flex-shrink-0">
                        <img class="w-10 h-10 rounded-full" src="https://ui-avatars.com/api/?name=John+Banda&background=4361ee&color=fff" alt="John Banda">
                    </div>
                    <div class="ml-3">
                        <p class="text-sm font-medium text-gray-900 dark:text-white">John Banda</p>
                        <p class="text-xs font-medium text-gray-500 dark:text-gray-400">Borrower</p>
                    </div>
                </div>
            </div>
            <div class="flex-shrink-0 w-14" aria-hidden="true"></div>
        </div>

        <!-- Desktop sidebar -->
        <div class="hidden lg:flex lg:flex-shrink-0">
            <div class="flex flex-col w-64 border-r border-gray-200 dark:border-gray-700 bg-white dark:bg-dark-800">
                <div class="flex flex-col flex-1 pt-5 pb-4 overflow-y-auto">
                    <div class="flex items-center flex-shrink-0 px-4">
                        <div class="flex items-center">
                            <div class="bg-primary p-2 rounded-lg">
                                <i class="text-white text-2xl fa-solid fa-landmark"></i>
                            </div>
                            <span class="ml-3 text-xl font-bold text-gray-900 dark:text-white">IRM Enterprise</span>
                        </div>
                    </div>
                    <nav class="mt-5 flex-1 px-2 space-y-1">
                        <a href="dashboard.html" class="sidebar-link flex items-center px-4 py-3 text-base font-medium rounded-lg group">
                            <i class="fa-solid fa-chart-line mr-3 text-gray-500 group-hover:text-primary"></i>
                            Dashboard
                        </a>
                        <a href="my_loans.html" class="sidebar-link flex items-center px-4 py-3 text-base font-medium rounded-lg group">
                            <i class="fa-solid fa-file-invoice-dollar mr-3 text-gray-500 group-hover:text-primary"></i>
                            My Loans
                        </a>
                        <a href="payback.html" class="sidebar-link flex items-center px-4 py-3 text-base font-medium rounded-lg group">
                            <i class="fa-solid fa-money-bill-transfer mr-3 text-gray-500 group-hover:text-primary"></i>
                            Payback
                        </a>
                        <a href="special_offers.html" class="sidebar-link flex items-center px-4 py-3 text-base font-medium rounded-lg group">
                            <i class="fa-solid fa-gift mr-3 text-gray-500 group-hover:text-primary"></i>
                            Special Offers
                        </a>
                        <a href="my_profile.html" class="sidebar-link active flex items-center px-4 py-3 text-base font-medium rounded-lg group bg-primary/10 text-primary">
                            <i class="fa-solid fa-user mr-3 text-primary"></i>
                            My Profile
                        </a>
                    </nav>
                </div>
                <div class="p-4 border-t border-gray-200 dark:border-gray-700">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <img class="w-10 h-10 rounded-full" src="https://ui-avatars.com/api/?name=John+Banda&background=4361ee&color=fff" alt="John Banda">
                        </div>
                        <div class="ml-3">
                            <p class="text-sm font-medium text-gray-900 dark:text-white">John Banda</p>
                            <p class="text-xs font-medium text-gray-500 dark:text-gray-400">Borrower</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="flex flex-col flex-1 min-w-0 overflow-hidden">
            <!-- Top navigation -->
            <div class="relative z-10 flex flex-shrink-0 h-16 bg-white dark:bg-dark-800 border-b border-gray-200 dark:border-gray-700">
                <div class="flex justify-between w-full px-4">
                    <div class="flex items-center">
                        <button @click="sidebarOpen = true" class="px-4 text-gray-500 border-r border-gray-200 dark:border-gray-700 focus:outline-none lg:hidden" aria-label="Open sidebar">
                            <i class="fa-solid fa-bars"></i>
                        </button>
                        <div class="flex items-center px-4 lg:px-0">
                            <h1 class="text-lg font-semibold text-gray-900 dark:text-white">My Profile</h1>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button @click="darkMode = !darkMode" class="p-2 text-gray-500 rounded-full hover:bg-gray-100 dark:hover:bg-dark-700 focus:outline-none" aria-label="Toggle dark mode" title="Toggle dark mode">
                            <i x-show="darkMode" class="fa-solid fa-sun"></i>
                            <i x-show="!darkMode" class="fa-solid fa-moon"></i>
                        </button>
                        
                        <div class="relative">
                            <button @click="notificationsOpen = !notificationsOpen" class="p-2 text-gray-500 rounded-full hover:bg-gray-100 dark:hover:bg-dark-700 focus:outline-none" aria-label="Open notifications">
                                <i class="fa-solid fa-bell"></i>
                                <span x-show="unreadCount > 0" class="notification-dot"></span>
                            </button>
                            <div x-show="notificationsOpen" @click.away="notificationsOpen = false" class="absolute right-0 mt-2 w-80 bg-white dark:bg-dark-800 rounded-md shadow-lg overflow-hidden z-20" x-cloak>
                                <div class="p-4 border-b border-gray-200 dark:border-gray-700">
                                    <h3 class="text-lg font-medium text-gray-900 dark:text-white">Notifications</h3>
                                    <p class="text-sm text-gray-500">You have <span x-text="unreadCount" class="font-medium"></span> unread notifications</p>
                                </div>
                                <div class="max-h-96 overflow-y-auto">
                                    <template x-for="notification in notifications">
                                        <a href="#" @click="if(!notification.read) { notification.read = true; unreadCount--; }" class="block px-4 py-3 border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-dark-700">
                                            <div class="flex">
                                                <div class="flex-shrink-0">
                                                    <template x-if="notification.type === 'payment'">
                                                        <div class="w-10 h-10 flex items-center justify-center rounded-full bg-blue-100 text-blue-500">
                                                            <i class="fa-solid fa-money-bill-wave"></i>
                                                        </div>
                                                    </template>
                                                    <template x-if="notification.type === 'approval'">
                                                        <div class="w-10 h-10 flex items-center justify-center rounded-full bg-green-100 text-green-500">
                                                            <i class="fa-solid fa-check"></i>
                                                        </div>
                                                    </template>
                                                    <template x-if="notification.type === 'offer'">
                                                        <div class="w-10 h-10 flex items-center justify-center rounded-full bg-yellow-100 text-yellow-500">
                                                            <i class="fa-solid fa-gift"></i>
                                                        </div>
                                                    </template>
                                                </div>
                                                <div class="ml-3">
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white" x-text="notification.title"></p>
                                                    <p class="text-sm text-gray-500" x-text="notification.content"></p>
                                                    <p class="text-xs text-gray-400 mt-1" x-text="notification.time"></p>
                                                </div>
                                                <div class="ml-auto" x-show="!notification.read">
                                                    <span class="h-2 w-2 rounded-full bg-primary"></span>
                                                </div>
                                            </div>
                                        </a>
                                    </template>
                                </div>
                                <div class="p-3 bg-gray-50 dark:bg-dark-700 text-center">
                                    <a href="#" class="text-sm font-medium text-primary hover:text-primary/80">View all notifications</a>
                                </div>
                            </div>
                        </div>
                        
                        <div class="relative">
                            <button @click="profileMenuOpen = !profileMenuOpen" class="flex text-sm rounded-full focus:outline-none">
                                <img class="w-8 h-8 rounded-full" src="https://ui-avatars.com/api/?name=John+Banda&background=4361ee&color=fff" alt="John Banda">
                            </button>
                            <div x-show="profileMenuOpen" @click.away="profileMenuOpen = false" class="absolute right-0 mt-2 w-48 bg-white dark:bg-dark-800 rounded-md shadow-lg py-1 z-20" x-cloak>
                                <a href="my_profile.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-700">Your Profile</a>
                                <a href="#" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-700">Settings</a>
                                <a href="#" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-700">Logout</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main content -->
            <main class="flex-1 overflow-y-auto p-6 bg-gray-50 dark:bg-dark-900">
                <!-- My Profile Page -->
                <div class="fade-in">
                    <!-- Profile Header -->
                    <div class="bg-white dark:bg-dark-800 rounded-lg shadow-sm p-6 mb-6">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <div class="relative">
                                    <img class="w-20 h-20 rounded-full" src="https://ui-avatars.com/api/?name=John+Banda&background=4361ee&color=fff&size=80" alt="John Banda">
                                    <button class="absolute bottom-0 right-0 bg-primary text-white rounded-full p-1 hover:bg-primary/90">
                                        <i class="fa-solid fa-camera text-xs"></i>
                                    </button>
                                </div>
                                <div class="ml-6">
                                    <h2 class="text-2xl font-bold text-gray-900 dark:text-white" x-text="userProfile.name"></h2>
                                    <p class="text-gray-600 dark:text-gray-400" x-text="userProfile.occupation"></p>
                                    <p class="text-sm text-gray-500 dark:text-gray-400">Member since <span x-text="userProfile.memberSince"></span></p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <button @click="editingProfile = true" class="bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-lg text-sm font-medium">
                                    <i class="fa-solid fa-edit mr-2"></i>
                                    Edit Profile
                                </button>
                                <button @click="changingPassword = true" class="border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-dark-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg text-sm font-medium">
                                    <i class="fa-solid fa-key mr-2"></i>
                                    Change Password
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Profile Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                        <div class="bg-white dark:bg-dark-800 rounded-lg shadow-sm p-6">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-blue-100 dark:bg-blue-900/20">
                                    <i class="fa-solid fa-file-invoice-dollar text-blue-600 dark:text-blue-400 text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Total Loans</p>
                                    <p class="text-2xl font-bold text-gray-900 dark:text-white" x-text="userProfile.totalLoans"></p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white dark:bg-dark-800 rounded-lg shadow-sm p-6">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-green-100 dark:bg-green-900/20">
                                    <i class="fa-solid fa-money-bill-wave text-green-600 dark:text-green-400 text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Total Borrowed</p>
                                    <p class="text-2xl font-bold text-gray-900 dark:text-white" x-text="userProfile.totalBorrowed"></p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white dark:bg-dark-800 rounded-lg shadow-sm p-6">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-purple-100 dark:bg-purple-900/20">
                                    <i class="fa-solid fa-check-circle text-purple-600 dark:text-purple-400 text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Total Repaid</p>
                                    <p class="text-2xl font-bold text-gray-900 dark:text-white" x-text="userProfile.totalRepaid"></p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white dark:bg-dark-800 rounded-lg shadow-sm p-6">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-yellow-100 dark:bg-yellow-900/20">
                                    <i class="fa-solid fa-clock text-yellow-600 dark:text-yellow-400 text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600 dark:text-gray-400">On-time Payments</p>
                                    <p class="text-2xl font-bold text-gray-900 dark:text-white" x-text="userProfile.onTimePayments + '%'"></p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Credit Score and Profile Details -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                        <!-- Credit Score -->
                        <div class="bg-white dark:bg-dark-800 rounded-lg shadow-sm p-6">
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Credit Score</h3>
                            <div class="text-center">
                                <div class="credit-score-gauge mb-4">
                                    <svg width="200" height="100" viewBox="0 0 200 100">
                                        <path d="M 20 80 A 80 80 0 0 1 180 80" class="credit-score-arc credit-score-bg"></path>
                                        <path d="M 20 80 A 80 80 0 0 1 180 80" class="credit-score-arc credit-score-fill" 
                                              :style="'stroke: ' + creditScoreColor + '; stroke-dasharray: ' + (userProfile.creditScore / 850 * 251) + ' 251'"></path>
                                    </svg>
                                    <div class="absolute inset-0 flex items-center justify-center">
                                        <div class="text-center">
                                            <div class="text-3xl font-bold text-gray-900 dark:text-white" x-text="userProfile.creditScore"></div>
                                            <div class="text-sm text-gray-500 dark:text-gray-400" x-text="creditScoreText"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex justify-between text-xs text-gray-500 dark:text-gray-400">
                                    <span>300</span>
                                    <span>850</span>
                                </div>
                                <div class="mt-4 p-3 bg-gray-50 dark:bg-dark-700 rounded-lg">
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Your credit score is updated monthly based on your payment history and loan performance.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Personal Information -->
                        <div class="lg:col-span-2 bg-white dark:bg-dark-800 rounded-lg shadow-sm p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Personal Information</h3>
                                <button @click="editingProfile = true" class="text-primary hover:text-primary/80 text-sm font-medium">
                                    <i class="fa-solid fa-edit mr-1"></i>
                                    Edit
                                </button>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Full Name</label>
                                    <p class="text-gray-900 dark:text-white" x-text="userProfile.name"></p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Phone Number</label>
                                    <p class="text-gray-900 dark:text-white" x-text="userProfile.phone"></p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Email Address</label>
                                    <p class="text-gray-900 dark:text-white" x-text="userProfile.email"></p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Address</label>
                                    <p class="text-gray-900 dark:text-white" x-text="userProfile.address"></p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Occupation</label>
                                    <p class="text-gray-900 dark:text-white" x-text="userProfile.occupation"></p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">ID Number</label>
                                    <p class="text-gray-900 dark:text-white" x-text="userProfile.idNumber"></p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Security Settings -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        <div class="bg-white dark:bg-dark-800 rounded-lg shadow-sm p-6">
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Security Settings</h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="font-medium text-gray-900 dark:text-white">Two-Factor Authentication</p>
                                        <p class="text-sm text-gray-500 dark:text-gray-400">Add an extra layer of security</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" x-model="securitySettings.twoFactorEnabled" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/25 dark:peer-focus:ring-primary/25 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"></div>
                                    </label>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="font-medium text-gray-900 dark:text-white">Email Notifications</p>
                                        <p class="text-sm text-gray-500 dark:text-gray-400">Receive security alerts via email</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" x-model="securitySettings.emailNotifications" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/25 dark:peer-focus:ring-primary/25 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"></div>
                                    </label>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="font-medium text-gray-900 dark:text-white">SMS Notifications</p>
                                        <p class="text-sm text-gray-500 dark:text-gray-400">Receive security alerts via SMS</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" x-model="securitySettings.smsNotifications" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/25 dark:peer-focus:ring-primary/25 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"></div>
                                    </label>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="font-medium text-gray-900 dark:text-white">Login Alerts</p>
                                        <p class="text-sm text-gray-500 dark:text-gray-400">Get notified of new logins</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" x-model="securitySettings.loginAlerts" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/25 dark:peer-focus:ring-primary/25 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"></div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Privacy Settings -->
                        <div class="bg-white dark:bg-dark-800 rounded-lg shadow-sm p-6">
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Privacy Settings</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Profile Visibility</label>
                                    <select x-model="privacySettings.profileVisibility" class="w-full border border-gray-300 dark:border-gray-700 rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-dark-700 dark:text-white">
                                        <option value="private">Private</option>
                                        <option value="public">Public</option>
                                        <option value="friends">Friends Only</option>
                                    </select>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="font-medium text-gray-900 dark:text-white">Data Sharing</p>
                                        <p class="text-sm text-gray-500 dark:text-gray-400">Share data with partners for better offers</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" x-model="privacySettings.dataSharing" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/25 dark:peer-focus:ring-primary/25 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"></div>
                                    </label>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="font-medium text-gray-900 dark:text-white">Marketing Emails</p>
                                        <p class="text-sm text-gray-500 dark:text-gray-400">Receive promotional offers and updates</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" x-model="privacySettings.marketingEmails" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/25 dark:peer-focus:ring-primary/25 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"></div>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Account Actions -->
                    <div class="bg-white dark:bg-dark-800 rounded-lg shadow-sm p-6">
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Account Actions</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <button class="flex items-center justify-center p-4 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-700 text-gray-700 dark:text-gray-300">
                                <i class="fa-solid fa-download mr-2"></i>
                                Download Data
                            </button>
                            <button class="flex items-center justify-center p-4 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-700 text-gray-700 dark:text-gray-300">
                                <i class="fa-solid fa-file-export mr-2"></i>
                                Export History
                            </button>
                            <button class="flex items-center justify-center p-4 border border-red-300 dark:border-red-600 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400">
                                <i class="fa-solid fa-trash mr-2"></i>
                                Delete Account
                            </button>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div x-show="editingProfile" x-cloak class="fixed z-50 inset-0 overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 transition-opacity" aria-hidden="true">
                <div class="absolute inset-0 bg-gray-500 opacity-75" @click="editingProfile = false"></div>
            </div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
            <div class="inline-block align-bottom bg-white dark:bg-dark-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
                <div class="bg-white dark:bg-dark-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <div class="sm:flex sm:items-start">
                        <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full">
                            <h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4">
                                Edit Profile
                            </h3>
                            <div class="mt-2 space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Full Name</label>
                                    <input type="text" x-model="userProfile.name" class="w-full border border-gray-300 dark:border-gray-700 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-dark-700 dark:text-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Phone Number</label>
                                    <input type="tel" x-model="userProfile.phone" class="w-full border border-gray-300 dark:border-gray-700 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-dark-700 dark:text-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Email Address</label>
                                    <input type="email" x-model="userProfile.email" class="w-full border border-gray-300 dark:border-gray-700 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-dark-700 dark:text-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Address</label>
                                    <textarea x-model="userProfile.address" rows="3" class="w-full border border-gray-300 dark:border-gray-700 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-dark-700 dark:text-white"></textarea>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Occupation</label>
                                    <input type="text" x-model="userProfile.occupation" class="w-full border border-gray-300 dark:border-gray-700 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-dark-700 dark:text-white">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-50 dark:bg-dark-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button type="button" @click="saveProfile()" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm:text-sm">
                        Save Changes
                    </button>
                    <button type="button" @click="editingProfile = false" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-dark-800 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-dark-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Change Password Modal -->
    <div x-show="changingPassword" x-cloak class="fixed z-50 inset-0 overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 transition-opacity" aria-hidden="true">
                <div class="absolute inset-0 bg-gray-500 opacity-75" @click="changingPassword = false"></div>
            </div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
            <div class="inline-block align-bottom bg-white dark:bg-dark-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
                <div class="bg-white dark:bg-dark-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <div class="sm:flex sm:items-start">
                        <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full">
                            <h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4">
                                Change Password
                            </h3>
                            <div class="mt-2 space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Current Password</label>
                                    <input type="password" placeholder="Enter current password" class="w-full border border-gray-300 dark:border-gray-700 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-dark-700 dark:text-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">New Password</label>
                                    <input type="password" placeholder="Enter new password" class="w-full border border-gray-300 dark:border-gray-700 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-dark-700 dark:text-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Confirm New Password</label>
                                    <input type="password" placeholder="Confirm new password" class="w-full border border-gray-300 dark:border-gray-700 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-dark-700 dark:text-white">
                                </div>
                                <div class="bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg">
                                    <h4 class="text-sm font-medium text-blue-800 dark:text-blue-200 mb-2">Password Requirements:</h4>
                                    <ul class="text-xs text-blue-700 dark:text-blue-300 space-y-1">
                                        <li> At least 8 characters long</li>
                                        <li> Contains uppercase and lowercase letters</li>
                                        <li> Contains at least one number</li>
                                        <li> Contains at least one special character</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-50 dark:bg-dark-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button type="button" @click="changePassword()" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm:text-sm">
                        Change Password
                    </button>
                    <button type="button" @click="changingPassword = false" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-dark-800 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-dark-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>

